## Troubleshooting performance of tableau live connections to SQL Server - part 1. BASICS.

👋 Hello everyone, wish you enjoy reading these findings I've gathered over a couple of years working with this type of scenario
This is part 2 where we discuss specific symptoms and troubleshooting steps.

I want to stress that the article is written with love and respect to this wonderful tool - don't misinterpret this as biased critics.

### Not obvious stuff done by Tableau under-the-hood

Here is a list of things that Tableau does to retrieve data for you - and the things that make your SQL Server yield suboptimal performance.
   1. Tableau generates a distinct query for each filter you have on a dashboard,
      Yes, and every time a user presses /refresh/, the DB is asked to retrieve a distinct set of elements to be displayed   
      📝 Remove all unnecessary filters from the dashboard - unless you _really_ need them.
   2. Tableau executes queries sequentially (if there are too many – then it shows in performance),
      Similar stuff as above. The more filters - the more wait time.
   3. WHERE predicates generated by Tableau are often far too complex for the DB to pick the right index and are non-sargable
   4. 11. Tableau generates ugly joins with subqueries  
6. Tableau generates bad type conversions (i.e. call everything nvarchar (9000))
   📝 Ensure that your calculated measures avoid type casts - both implicit and explicit.
   📝 Perform operations and comparisons within the same type - int being more preferred over strings or floats,
   📝 Avoid concantenation of strings in measures
   📝 If any of the above is strictly necessary, do them in SQL code.
8. LOD’s normally show up very poor in the code - very bad for performance,
9. Some formulas yield code like “CASE WHEN 1=0 THEN …. ELSE … END”,
